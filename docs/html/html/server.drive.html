
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="utf-8" />
    <title>server.drive module &#8212; ngv  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="server.logger module" href="server.logger.html" />
    <link rel="prev" title="server.config module" href="server.config.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-server.drive">
<span id="server-drive-module"></span><h1>server.drive module<a class="headerlink" href="#module-server.drive" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="server.drive.average_slope_intercept">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">average_slope_intercept</code><span class="sig-paren">(</span><em class="sig-param">frame</em>, <em class="sig-param">line_segments</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#average_slope_intercept"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.average_slope_intercept" title="Permalink to this definition">¶</a></dt>
<dd><p>영상을 좌우 영역으로 나눠 양쪽 차선의 기울기와 y절편을 구한다.
기울기가 음수일 경우 x1, x2 모두 왼쪽 영역에 있을때 왼쪽 차선,
기울기가 음수가 아닐 경우 x1, x2 모두 오른쪽 영역에 있을때 오른쪽 차선으로 간주한다.
이때 x1, x2가 같을 경우 수직이기에 건너뛴다.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> – 웹캠으로 입력받은 영상</p></li>
<li><p><strong>line_segments</strong> – 검출한 차선 윤곽선</p></li>
</ul>
</dd>
<dt class="field-even">Returns lane_lines</dt>
<dd class="field-even"><p>양측 차선</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.detect_edges">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">detect_edges</code><span class="sig-paren">(</span><em class="sig-param">frame</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#detect_edges"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.detect_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>영상의 edge를 찾는 함수이다.
영상을 흑백 이진화 처리한 후 bilateral filter를 이용하여 노이즈를 제거한다.
Canny Algorithm을 이용해 edge를 찾는다.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>frame</strong> – 웹캠으로 입력받은 edge를 찾을 영상</p>
</dd>
<dt class="field-even">Returns edges</dt>
<dd class="field-even"><p>영상의 edge</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.detect_line_segments">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">detect_line_segments</code><span class="sig-paren">(</span><em class="sig-param">cropped_edges</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#detect_line_segments"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.detect_line_segments" title="Permalink to this definition">¶</a></dt>
<dd><p>관심영역으로 자른 영상을 받아 차선으로 예상되는 선을 검출한다.
입력 영상에서 임의의 점을 대상으로 차선을 검출하는 확률적 허프변환을 이용하여 차선을 찾는다.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>cropped_edges</strong> – 차선을 검출할 이진화된 영상</p>
</dd>
<dt class="field-even">Returns line_segments</dt>
<dd class="field-even"><p>검출한 차선 윤곽선</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.display_heading_line">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">display_heading_line</code><span class="sig-paren">(</span><em class="sig-param">frame</em>, <em class="sig-param">steering_angle</em>, <em class="sig-param">line_color=(0</em>, <em class="sig-param">0</em>, <em class="sig-param">255)</em>, <em class="sig-param">line_width=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#display_heading_line"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.display_heading_line" title="Permalink to this definition">¶</a></dt>
<dd><p>차량의 steering angle을 직선으로 표시한다.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> – 웹캠으로 입력받은 영상</p></li>
<li><p><strong>steering_angle</strong> – 차량의 steering angle</p></li>
<li><p><strong>line_color</strong> – 표시할 직선의 색</p></li>
<li><p><strong>line_width</strong> – 표시할 직선의 두께</p></li>
</ul>
</dd>
<dt class="field-even">Returns heading_image</dt>
<dd class="field-even"><p>steering angle이 표시된 영상</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.display_lines">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">display_lines</code><span class="sig-paren">(</span><em class="sig-param">frame</em>, <em class="sig-param">lines</em>, <em class="sig-param">line_color=(0</em>, <em class="sig-param">255</em>, <em class="sig-param">0)</em>, <em class="sig-param">line_width=6</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#display_lines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.display_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>영상에 차선을 표시한다.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> – 웹캠으로 입력받은 영상</p></li>
<li><p><strong>lines</strong> – 차선</p></li>
<li><p><strong>line_color</strong> – 차선의 색</p></li>
<li><p><strong>line_width</strong> – 차선 두께</p></li>
</ul>
</dd>
<dt class="field-even">Returns line_image</dt>
<dd class="field-even"><p>차선이 표시된 영상</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.get_steering_angle">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">get_steering_angle</code><span class="sig-paren">(</span><em class="sig-param">frame</em>, <em class="sig-param">lane_lines</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#get_steering_angle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.get_steering_angle" title="Permalink to this definition">¶</a></dt>
<dd><p>웹캠에서 영상을 입력받아 steering angle을 구한다.
차량이 양측 차선의 중앙으로 가도록 제어한다.
입력 받은 영상에서 검출한 차선의 수에 따라 구한다.</p>
<ul class="simple">
<li><p>x_offset : 양측 차선의 중간(가로축)과 화면 중앙의 차이</p></li>
<li><p>y_offset : 높이의 절반</p></li>
<li><p>차선이 2개인 경우 : 두 차선의 중앙으로 향하도록 한다.</p></li>
<li><p>차선이 1개인 경우 : 검출한 차선과 평행하도록 한다.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> – 웹캠으로 입력받은 영상</p></li>
<li><p><strong>lane_lines</strong> (<em>int</em>) – 차선의 수</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.make_points">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">make_points</code><span class="sig-paren">(</span><em class="sig-param">frame</em>, <em class="sig-param">line</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#make_points"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.make_points" title="Permalink to this definition">¶</a></dt>
<dd><p>웹캠 영상을 입력받아 좌표를 생성한다.
기울기와 y절편으로 x좌표를 찾는다.
이때, 기울기가 0인경우 0으로 나눌 수 없기 때문에 작은 값인 0.1로 대신 계산한다.</p>
<ul class="simple">
<li><p>x1 : 차선의 왼쪽 가로 좌표</p></li>
<li><p>x2 : 차선의 오른쪽 가로 좌표</p></li>
<li><p>y1 : 영상 바닥 세로 좌표</p></li>
<li><p>y2 : 영상 높이의 중간 세로 좌표</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> – 웹캠으로 입력받은 영상</p></li>
<li><p><strong>line</strong> – 왼쪽 또는 오른쪽 차선</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.region_of_interest">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">region_of_interest</code><span class="sig-paren">(</span><em class="sig-param">edges</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#region_of_interest"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.region_of_interest" title="Permalink to this definition">¶</a></dt>
<dd><p>입력받은 영상의 하단 절반을 관심 영역으로 자른다.
영상과 같은 크기의 array를 생성한 후 영상의 관심 영역 부분을 복사하여 반환한다.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>edges</strong> – 관심 영역을 지정할 edge를 찾은 영상</p>
</dd>
<dt class="field-even">Returns cropped_edges</dt>
<dd class="field-even"><p>복사한 관심 영역 영상</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="server.drive.run">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.run" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="server.drive.stop_forwarding">
<code class="sig-prename descclassname">server.drive.</code><code class="sig-name descname">stop_forwarding</code><span class="sig-paren">(</span><em class="sig-param">sig</em>, <em class="sig-param">frame</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/server/drive.html#stop_forwarding"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#server.drive.stop_forwarding" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">ngv</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="client.html">client package</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="server.html">server package</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="server.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="server.config.html">server.config module</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">server.drive module</a></li>
<li class="toctree-l3"><a class="reference internal" href="server.logger.html">server.logger module</a></li>
<li class="toctree-l3"><a class="reference internal" href="server.sensor_server.html">server.sensor_server module</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="server.html#module-server">Module contents</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="server.html">server package</a><ul>
      <li>Previous: <a href="server.config.html" title="previous chapter">server.config module</a></li>
      <li>Next: <a href="server.logger.html" title="next chapter">server.logger module</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, Author.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/server.drive.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>